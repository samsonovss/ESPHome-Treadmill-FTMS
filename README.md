# ESPHomeTreadmill

Бортовой компьютер для беговой дорожки на базе Esp32 S3 с EspHome с поддержкой Zwift, работает через UART для плат серии: PSA(xx)
команды UART которые удалось подслушать (но в целом может быть любая плата которая отправляет команды по UART)
- Скорость [Setspeed:xxx] (где xxx) скорость, пример [Setspeed:010] = 1км/ч
- Наклон [Setincline:xxx] (где xxx) высота, пример [Setincline:000] = 0%

Рекомендация для проекта 
 - Esp32 S3 (настоятельно рекомендуется)
 - Преобразователь напряжения с 12v на 5v (не изолированный)
 - 2ch Logic Level Converter 5V to 3.3V (для согласования уровней между нижней платой и Esp32 S3)
 - Беговая дорожка с серии плат: PSA(xx) но подойдет любая которая отправляет и принимает команды по UART RX-TX

Возможности
  - Поддержка Zwift
  - Подключение пульсометра
  - Расчет зон пульс по (возраст, пол)
  - Реальный наклон в процентах
  - Управление с ручек(кнопок) беговой дорожки (наклон - скорость, подключается к esp32s3 по GPIO)
  - Тренировка без пульсометра (ручной режим)
  - Локальное сохранение ваших пробежек и возможность просмотра в Grafana
  - Интелектуальное изминение скорости для пульсометра
    - Если разница до зоны пульса больше 20 чсс, то скорость плавно изменяется на +-0.5 с шагом по 0.1 каждые 2е секунды.
    - Если разница меньше 20чсс, то скорость плавно изменяется на +-0.1. каждые 20 секунд
  
  Разминка
  - интелектуальный разогрев (для согревания связок и перевода чсс в 1 зону пульса)
  - настраиваемое время разминки (если время "5 минут" и пульс дошел до зоны 1, то ожидает пока не завершится время разминки)
  - ждет пока пульс не достигнет зоны 1, если достиг и время вышло, то переход к основной программе
    
  Заминка
  - интелектуальная заминка, плавно снижает скорость пока чсс не достигнет зоны 1
  - настраиваемое время (работа по аналогии как в разминке)

Интелектуальные программы (с пульсометром и регулировкой скорости и наклона)
- Настраиваемая зона пульса (регулирует скорость чтобы поддерживать пульс в зоне)
- Жиросжигающая тренировка (2а зона пульса, регулирует скорость и регулирует плавно скорость)
- Интервальная тренировка (с учетом пульса, переход между зоной пульса 1 и 4, скорость автоматически регулируется
- Востановительный бег (поддержания зоны пульса 1)

В будущем добавление:
- стандарта FTMS (Kinomap, iFit)
- Карта высот, новые программы
- Дисплей с интерфейсом для удобства
- наклон для Zwift
